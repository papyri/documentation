<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.12
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><div id='filecontents'><h2>Requirements</h2>

<ul>
<li><a href="http://jruby.org/">JRuby 1.6.8</a> - preferably managed with <a href="https://github.com/sstephenson/rbenv">rbenv</a></li>
<li><a href="http://bundler.io">Bundler</a> - <code>gem install bundler</code></li>
</ul>


<h2>Usage</h2>

<p>This project contains JRuby libraries and wrappers for
<a href="http://www.brics.dk/xsugar/">XSugar</a> as well as grammars for converting
between <a href="http://epidoc.sourceforge.net/">EpiDoc XML</a> and Leiden+ (a
Leiden-style plaintext markup). There is also a pure-Java standalone
XSugar transformation servlet in <code>src/standalone</code>.</p>

<p>To convert between the EpiDoc and Leiden+, the utility scripts
<code>xml2nonxml.rb</code> and <code>nonxml2xml.rb</code> are provided.</p>

<p>To use them you can simply run:</p>

<pre class="code ruby"><code class="ruby">./bin/xml2nonxml.rb &lt; epidoc.xml &gt; leiden.txt
</code></pre>

<p>or
    ./bin/nonxml2xml.rb &lt; leiden.txt > epidoc.xml</p>

<h2>File Structure</h2>

<pre class="code ruby"><code class="ruby">bin/                     command-line scripts
    blackboard_agent.rb  blackboard XSugar transformer agent (run many)
    blackboard_server.rb blackboard XSugar transformer server (run one)
    coverage.sh          IDP2 grammar coverage script
    xml2nonxml.rb        command-line xml-&gt;non-xml RXSugar utility
    nonxml2xml.rb        command-line non-xml-&gt;xml RXSugar utility
epidoc.xsg               Leiden+ XSugar grammar
init.rb                  Rails plugin init script
lib/                     source code
    coverage/            classes for testing XSugar coverage
    standalone/          classes for warming up standalone server
    jruby_helper.rb      helper classes for invoking RXSugar from JRuby
    modules_jruby.rb     Java-&gt;Ruby module conversion for JRuby
    modules_rjb.rb       Java-&gt;Ruby module conversion for RJB
    rxsugar.rb           main Ruby XSugar wrapper class
    rxsugar_helper.rb    helper classes for using Ruby XSugar wrapper
    util_helper.rb       helper classes for command-line scripts
    xsugar-all.jar       compiled upstream XSugar JAR
src/                     Java source code
    standalone/          source code for standalone transformation server
    xsugar/              upstream XSugar source code
test/                    source code for unit testing
translation_epidoc.xsg   XSugar grammar for EpiDoc translations
</code></pre>

<h2>Testing</h2>

<p>The Ruby testing uses bundler for gem dependencies, so you should invoke rake with:</p>

<p>  bundle exec rake</p>

<h2>Upstream</h2>

<p>The Java XSugar source is tracked in xsugar-vendor. Customizations for this
project are in xsugar-customizations, merged into master. To e.g. update
to a new upstream version of XSugar, you would unpack it to src/xsugar
on the xsugar-vendor branch and commit the changes. Then you would rebase
the changes in xsugar-customizations onto the new xsugar-vendor. Then merge
xsugar-customizations into master and rebuild lib/xsugar-all.jar (using the
rake task java:xsugar:build) and commit. Do not make changes/customizations to
the Java XSugar source on master, make them on xsugar-customizations so that
the merge upstream/rebase/merge workflow is more straightforward.</p>
</div></div>
    
  </body>
</html>
